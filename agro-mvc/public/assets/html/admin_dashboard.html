<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agro</title>
    <link href="/assets/css/dashboard_admin.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <h1>Admin's Dashboard</h1>
    <--Buttons-->
    <button class="switch" value="employed">Funcionarios</button>
    <button class="switch" value="job">Profissoes</button>
    <button class="switch" value="training">Treinamentos</button>

    <--Employeds Table-->
    <table class="employed" id="table_employed">
      <tr>
        <th>Id</th>
        <th>Nome</th>
        <th>Matricula</th>
        <th>Profissao</th>
	      <th>Treimento(s)</th>
        <th>Telefone</th>
        <th>Email</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for employed in employeds %}
      <tr id="employed_{{employed.id}}">
        <td class="id">{{employed.id}}</td>
        <td class="name">{{employed.name}}</td>
        <td class="mat">{{employed.mat}}</td>
        <td class="job">{{employed.job}}</td>
	      <td class="trainings">
	        <ul>
	          {% for relation in relations_employed_training %}
	            {% if relation.id_employed == employed.id %}
	              <li>{{relation.training_name}}</li>
	            {% endif %}
	          {% endfor %}
	        </ul>
	      </td>
        <td class="tel">{{employed.tel}}</td>
        <td class="email">{{employed.email}}</td>
        <td>{{employed.date}}</td>
        <td class="action employed">
          <button name="edit" class="action" value="employed_{{employed.id}}">Editar</button>
          <button name="hidden" class="action" value="employed_{{employed.id}}">Esconder</button>
          <button name="delete" class="action" value="employed_{{employed.id}}">Excluir</button>
        </td>
      </tr>
      {% endfor %} 
    </table>
    
    <--Job Table-->
    <table class="job" id="table_job">
      <tr>
        <th>Id</th>
        <th>Nome</th>
	      <th>Treinamento(s)</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for job in jobs %}
      <tr id="job_{{job.id}}">
        <td class="id">{{job.id}}</td>
        <td class="name">{{job.name}}</td>
	      <td class="trainings">
	        <ul>
          {% for relation in relations_job_training %}
            {% if relation.id_job == job.id %}
              <li>{{relation.training_name}}</li>
            {% endif %}
          {% endfor %}
	        </ul>
        </td>
        <td class="date">{{job.date}}</td>
        <td class="action job">
          <button name="edit" class="action" value="job_{{job.id}}">Editar</button>
          <button name="hidden" class="action" value="job_{{job.id}}">Esconder</button>
          <button name="delete" class="action" value="job_{{job.id}}">Excluir</button>
        </td>
      </tr>
      {% endfor %}
    </table>

    <--Training Table-->
    <table class="training" id="table_training">
      <tr>
        <th>Id</th>
        <th>Nome</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for training in trainings %}
        <tr id="training_{{training.id}}">
          <td class="id">{{training.id}}</td>
          <td class="name">{{training.name}}</td>
          <td class="date">{{training.date}}</td>
          <td class="action training">
            <button name="edit" class="action" value="training_{{training.id}}">Editar</button>
            <button name="hidden" class="action" value="training_{{training.id}}">Esconder</button>
            <button name="delete" class="action" value="training_{{training.id}}">Excluir</button>
          </td>
        </tr>
      {% endfor %}
    </table>

    <--Employed Popup-->
    <dialog class="employed">
      <div class="employed popup_edit">
        <h1>Editar Employed</h1>
        <button class="exit">Sair</button>
        <br>
        <label>Nome: </label><input type="text" class="name" placeholder="">
        <br>
        <label>Matricula: </label><input type="text" class="mat" placeholder="">
        <br>
        <div class="trainings"></div>
        <select>
          {% if trainings %}
          {% for training in trainings %}
          <option value="{{training.id}}">{{training.name}}</option>
          {% endfor %}
          {% endif %}
        </select>
        <br>
        <label>Telefone: </label><input type="text" class="tel" placeholder="">
        <br>
        <label>Email: </label><input type="email" class="email" placeholder="">
        <br>
        <button>Salvar</button>
      </div>
    </dialog>

    <--Job Popup-->
    <dialog class="job">
      <div class="job popup_edit">
        <h1>Editar Job</h1>
        <button class="exit">Sair</button>
        <br>
        <label>Nome: </label><input type="text" class="name" placeholder="">
        <br>
        <div class="trainings"></div>
        <select>
          {% if trainings %}
            {% for training in trainings %}
              <option value="{{training.id}}">{{training.name}}</option>
            {% endfor %}
          {% endif %}
        </select>
        <br>
        <button>Salvar</button>
      </div>
    </dialog>

    <--Training Popup-->
    <dialog class="training">
      <div class="training popup_edit">
        <h1>Editar Training</h1>
        <button class="exit">Sair</button>
        <br>
        <label>Nome: </label><input type="text" class="name" placeholder="">
        <br>
        <button>Salvar</button>
      </div>
    </dialog>

  </body>
</html>
<script src="/assets/js/dashboard_admin.js"></script>
