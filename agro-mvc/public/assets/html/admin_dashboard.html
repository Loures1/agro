<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agro</title>
    <link href="/assets/css/dashboard_admin.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <h1>Admin's Dashboard</h1>
    <--Buttons-->
    <button class="switch" value="employed">Funcionarios</button>
    <button class="switch" value="job">Profissoes</button>
    <button class="switch" value="training">Treinamentos</button>
    <button class="create">Criar</button>

    <--Employeds Table-->
    <table class="employed" id="table_employed" style="display: block;">
      <tr>
        <th>Id</th>
        <th class="name">Nome</th>
        <th class="mat">Matricula</th>
        <th class="job">Profissão</th>
	      <th class="training">Treimento(s)</th>
        <th class="tel">Telefone</th>
        <th class="email">Email</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for employed in employeds %}
      <tr id="employed_{{employed.id}}">
        <td>{{employed.id}}</td>
        <td class="name">{{employed.name}}</td>
        <td class="mat">{{employed.mat}}</td>
        <td class="job"><ul><li>{{employed.job}}</li></ul></td>
	      <td class="training">
	        <ul>
	          {% for relation in relations_employed_training %}
	            {% if relation.id_employed == employed.id %}
	              <li>{{relation.training_name}}</li>
	            {% endif %}
	          {% endfor %}
	        </ul>
	      </td>
        <td class="tel">{{employed.tel}}</td>
        <td class="email">{{employed.email}}</td>
        <td>{{employed.date}}</td>
        <td>
          <button class="edit" value="employed_{{employed.id}}">Editar</button>
          <button class="hidden" value="employed_{{employed.id}}">Esconder</button>
          <button class="delete" value="employed_{{employed.id}}">Excluir</button>
        </td>
      </tr>
      {% endfor %}
    </table>
    
    <--Job Table-->
    <table class="job" id="table_job" style="display: none;">
      <tr>
        <th>Id</th>
        <th>Nome</th>
	      <th>Treinamento(s)</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for job in jobs %}
      <tr id="job_{{job.id}}">
        <td>{{job.id}}</td>
        <td class="name">{{job.name}}</td>
	      <td class="training">
	        <ul>
          {% for relation in relations_job_training %}
            {% if relation.id_job == job.id %}
              <li>{{relation.training_name}}</li>
            {% endif %}
          {% endfor %}
	        </ul>
        </td>
        <td>{{job.date}}</td>
        <td>
          <button class="edit" value="job_{{job.id}}">Editar</button>
          <button class="hidden" value="job_{{job.id}}">Esconder</button>
          <button class="delete" value="job_{{job.id}}">Excluir</button>
        </td>
      </tr>
      {% endfor %}
    </table>

    <--Training Table-->
    <table class="training" id="table_training" style="display: none;">
      <tr>
        <th>Id</th>
        <th>Nome</th>
        <th>Data de Criacao</th>
        <th>Ações</th>
      </tr>
      {% for training in trainings %}
        <tr id="training_{{training.id}}">
          <td>{{training.id}}</td>
          <td class="name">{{training.name}}</td>
          <td>{{training.date}}</td>
          <td>
            <button class="edit" value="training_{{training.id}}">Editar</button>
            <button class="hidden" value="training_{{training.id}}">Esconder</button>
            <button class="delete" value="training_{{training.id}}">Excluir</button>
          </td>
        </tr>
      {% endfor %}
    </table>

    <--Popup Edit-->
    <dialog>
      <h1>Alterar</h1>
      <div class="content"></div>
      <button>Salvar</button>
      <button>Fechar</button>
    </dialog>
  </body>
</html>
<script src="/assets/js/dashboard_admin.js"></script>